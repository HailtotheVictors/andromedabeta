<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://www.youtube.com/iframe_api"></script>
<script async src="https://cse.google.com/cse.js?cx=010448235055792414413:bd55esbdtnq"></script>
<script>
var firstCustom = true;
var player;

function findSong() {
	var searchinput = document.getElementsByName("search")[0];
	var searchbutton = document.getElementsByClassName("gsc-search-button")[1];
	var query = document.getElementById("buscar").value;
	searchinput.value = query;
	searchbutton.click();
	setTimeout(function() { mettwo(); }, 1200);
}

function mettwo() {
	var index = document.getElementsByClassName("gs-visibleUrl");
	var titles = document.getElementsByClassName("gs-title");
	var vidName = titles[1].innerHTML.replace(/(<([^>]+)>)/ig,"");
	var limit = 0;
	var finalPos = 0;
	while (limit < vidName.length) {
		var chara = vidName.substring(limit,limit + 1)
		if (chara == " " && limit <= 16) {
			finalPos = limit;
		}
		limit++;
	}
	document.getElementById("title").innerHTML = vidName.substring(0,finalPos - 1) + "...";
	var link = index[1].innerHTML;
	var start = link.indexOf("=");
	var code = link.substring(start + 1,link.length);
	document.getElementById("pic").style.backgroundImage = "url('https://img.youtube.com/vi/" + code + "/0.jpg')";
	document.getElementById("pic").classList.add("adjust");
    if (firstCustom == true) {
		player = new YT.Player('video-placeholder', {
			width: 600,
			height: 400,
			videoId: code,
			autoplay: 1,
			events: {
				onReady: initialize
			}
		});
		firstCustom = false;
	} else {
		player.loadVideoById(code);
		loadVideoById(code);
	}
	$("#video-placeholder")[0].src += "&autoplay=1";
    //document.getElementById("video-placeholder").preventDefault();
}

var time_update_interval;
function initialize(){
    updateTimerDisplay();
	clearInterval(time_update_interval);
    time_update_interval = setInterval(function () {
        updateTimerDisplay();
    }, 1000)
}

function updateTimerDisplay() {
    var songProgress = player.getCurrentTime();
    var songLength = player.getDuration();
	if (songProgress >= songLength) {
		console.log('Song is done');
		clearInterval(time_update_interval);
	}
}
</script>
<style>
.adjust {
	background-size: 160% auto !important;
}
#pic {
	height: 300px;
	width: 300px;
	background-image: url('https://hailtothevictors.github.io/andromeda/favicon_c.png');
	background-size: 100%;
	background-position: center;
}
#title {
	font-family: 'Roboto', sans-serif;
	font-size: 60px;
}
</style>
<button onclick="highlight()">Links9.8</button>
<button onclick="mettwo()">API1</button>
<button onclick="player.seekTo(120)">Move</button>
<input placeholder="Search" id="buscar"/><button onclick="findSong()">o</button>
<div id="pic"></div>
<span id="title">Song Title Here</span>
<div style="display:none" id="hidden">
	<div class="gcse-search"></div>
	<div id="video-placeholder"></div>
</div>
