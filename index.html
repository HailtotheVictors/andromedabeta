<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://www.youtube.com/iframe_api"></script>
<script async src="https://cse.google.com/cse.js?cx=010448235055792414413:bd55esbdtnq"></script>
<script>
window.onload = codeAddress;
function codeAddress() {
    setTimeout(function() {
		document.getElementsByClassName("gsc-search-button")[0].addEventListener("click", newVideo);
	}, 500);
}

function newVideo() {
	setTimeout(function() { highlight(); }, 500);
}

function highlight() {
	var index = document.getElementsByClassName("gs-visibleUrl");
	var link = index[1].innerHTML;
	var start = link.indexOf("=");
	var code = link.substring(start + 1,link.length);
	$("#phyyt").remove();
	$('<iframe id="phyyt" width="420" height="315" frameborder="0" allowfullscreen></iframe>').attr("src", "https://www.youtube.com/embed/" + code).appendTo("#ytcont");
	var repeat = setInterval(function() {
		var videlem = document.getElementById("phyyt");
		console.log(videlem.currentTime);
	}, 100);
}

var player;
function mettwo() {
	var index = document.getElementsByClassName("gs-visibleUrl");
	var link = index[1].innerHTML;
	var start = link.indexOf("=");
	var code = link.substring(start + 1,link.length);
    player = new YT.Player('video-placeholder', {
        width: 600,
        height: 400,
        videoId: code,
	autoplay: 1,
        events: {
            onReady: initialize
        }
    });
}

var time_update_interval;
function initialize(){
    updateTimerDisplay();
	clearInterval(time_update_interval);
    time_update_interval = setInterval(function () {
        updateTimerDisplay();
    }, 1000)
}

function updateTimerDisplay(){
    var now = player.getCurrentTime();
    var len = player.getDuration();
	console.log(now + "|" + len);
}

function findSong() {
	var searchinput = document.getElementsByName("search")[0];
	console.log(searchinput);
	var searchbutton = document.getElementsByClassName("gsc-search-button")[1];
	console.log(searchbutton);
	var query = document.getElementById("buscar").value;
	searchinput.value = query;
	searchbutton.click();
	setTimeout(function() { mettwo(); }, 1000);
}
</script>
<button onclick="highlight()">Links6.8</button>
<button onclick="mettwo()">API1</button>
<button onclick="player.seekTo(69)">Move</button>
<input placeholder="Search" id="buscar"/><button onclick="findSong()">o</button>
<div class="gcse-search"></div>
<div id="video-placeholder"></div>
